<script>
    function initialize(rooms) {
      var location = {lat: 44.5403, lng: -78.5463}

      if (rooms.length > 0) {
        location = {lat: rooms[0].latitude, lng: rooms[0].longitude}
      }

      var map = new google.maps.Map(document.getElementById('map'), {
        center: location,
        zoom: 12
      });

      var marker, inforwindow;

      rooms.forEach(function(room) {
        marker = new google.maps.Marker({
          position: {lat: room.latitude, lng: room.longitude},
          map: map
        });

        inforwindow = new google.maps.InfoWindow({
          content: "<div class='map_price'>$" + room.price + "</div>"
        });

        inforwindow.open(map, marker);
      })
    }

    google.maps.event.addDomListener(window, 'load', function() {
      initialize(<%= raw @arr_rooms.to_json %>)
    });
</script>
